{"version":3,"file":"index.modern.js","sources":["../src/utils.tsx","../src/components/Divider.tsx","../src/components/Pane.tsx","../src/components/Layout.tsx"],"sourcesContent":["import React from \"react\";\nimport { IOrientation } from \"./types\";\n\nexport function computePosition(\n  orientation: IOrientation,\n  position: number\n): React.CSSProperties {\n  return orientation === \"horizontal\"\n    ? {\n        left: `${position * 100}%`,\n        top: \"0\"\n      }\n    : {\n        left: \"0\",\n        top: `${position * 100}%`\n      };\n}\n\nexport function computeSize(\n  orientation: IOrientation,\n  size: number\n): React.CSSProperties {\n  return orientation === \"horizontal\"\n    ? {\n        width: `${size * 100}%`,\n        height: \"100%\"\n      }\n    : {\n        width: \"100%\",\n        height: `${size * 100}%`\n      };\n}\n","import React from \"react\";\nimport { ILayout, IPane, ILayoutController, IOrientation } from \"../types\";\nimport { computePosition } from \"../utils\";\n\nexport interface DividerProps {\n  notebook: ILayoutController;\n  pageId: string;\n  orientation: IOrientation;\n  previous: ILayout | IPane;\n  next: ILayout | IPane;\n}\n\nexport class Divider extends React.Component<DividerProps> {\n  computeSize(orientation: IOrientation): React.CSSProperties {\n    return orientation === \"horizontal\"\n      ? {\n          width: \"10px\",\n          height: \"100%\"\n        }\n      : {\n          width: \"100%\",\n          height: \"10px\"\n        };\n  }\n\n  render() {\n    const { orientation, next } = this.props;\n\n    const style = {\n      backgroundColor: \"red\",\n      position: \"absolute\",\n      ...computePosition(orientation, next.position),\n      ...this.computeSize(orientation)\n    } as React.CSSProperties;\n\n    return <div style={style} />;\n  }\n}\n","import React from \"react\";\n\nimport { IDirection, ILayoutController, IOrientation, IPane, IPaneProps } from \"../types\";\nimport { computePosition, computeSize } from \"../utils\";\n\nexport interface PaneProps {\n  notebook: ILayoutController;\n  pageId: string;\n  pane: IPane;\n  orientation: IOrientation;\n  Component: React.ComponentType<IPaneProps>;\n}\n\nexport class Pane extends React.Component<PaneProps> {\n  paneRef: React.RefObject<HTMLDivElement>;\n\n  constructor(props: PaneProps) {\n    super(props);\n\n    this.computeEdge = this.computeEdge.bind(this);\n    this.computeRelativeSize = this.computeRelativeSize.bind(this);\n    this.handleMouseDown = this.handleMouseDown.bind(this);\n\n    this.paneRef = React.createRef();\n  }\n\n  computeEdge(event: React.MouseEvent): IDirection | null {\n    const { left, right, top, bottom } =\n      this.paneRef.current!.getBoundingClientRect();\n\n    const { clientX, clientY } = event;\n\n    const [distance, closestDirection] = ([\n      [clientX - left, \"west\"],\n      [right - clientX, \"east\"],\n      [clientY - top, \"north\"],\n      [bottom - clientY, \"south\"]\n    ] as [number, IDirection][]).sort(([a, b], [c, d]) => a - c)[0];\n\n    return distance <= 100 ? (closestDirection as IDirection) : null;\n  }\n\n  computeRelativeSize(orientation: IOrientation, event: React.MouseEvent) {\n    const { left, top, width, height } =\n      this.paneRef.current!.getBoundingClientRect();\n\n    return orientation === \"horizontal\"\n      ? event.clientX - left / width\n      : event.clientY - top / height;\n  }\n\n  handleMouseDown(event: React.MouseEvent) {\n    if (!event.ctrlKey || !event.metaKey) return;\n\n    const edge = this.computeEdge(event);\n    if (edge === null) return;\n\n    const { notebook, pageId, pane } = this.props;\n\n    notebook.splitPageLayoutPane(\n      pageId,\n      pane.id,\n      edge,\n      this.computeRelativeSize(\n        edge === \"west\" || edge === \"east\" ? \"horizontal\" : \"vertical\",\n        event\n      )\n    );\n  }\n\n  render() {\n    const { pane, orientation, Component } = this.props;\n    const { position, size, props } = pane;\n\n    const style = {\n      position: \"absolute\",\n      ...computePosition(orientation, position),\n      ...computeSize(orientation, size)\n    } as React.CSSProperties;\n\n    return (\n      <div ref={this.paneRef} style={style} onMouseDown={this.handleMouseDown}>\n        <Component {...props} />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { IOrientation } from \"..\";\nimport { ILayout, ILayoutController, IPaneProps } from \"../types\";\nimport { computePosition, computeSize } from \"../utils\";\nimport { Divider } from \"./Divider\";\nimport { Pane } from \"./Pane\";\n\nexport interface LayoutProps {\n  notebook: ILayoutController;\n  pageId: string;\n  layout: ILayout;\n  orientation: IOrientation;\n  Component: React.ComponentType<IPaneProps>;\n}\n\nexport class Layout extends React.Component<LayoutProps> {\n  render() {\n    const {\n      notebook,\n      pageId,\n      layout,\n      orientation: parentOrientation,\n      Component\n    } = this.props;\n    const { orientation, children } = layout;\n\n    const style = {\n      position: \"relative\",\n      ...computePosition(parentOrientation, layout.position),\n      ...computeSize(parentOrientation, layout.size)\n    } as React.CSSProperties;\n\n    return (\n      <div style={style}>\n        {children.map((child) =>\n          child.type === \"layout\" ? (\n            <Layout\n              key={child.id}\n              notebook={notebook}\n              pageId={pageId}\n              layout={child}\n              orientation={orientation}\n              Component={Component}\n            />\n          ) : (\n            <Pane\n              key={child.id}\n              notebook={notebook}\n              pageId={pageId}\n              pane={child}\n              orientation={orientation}\n              Component={Component}\n            />\n          )\n        )}\n        {children.slice(1).map((child, index) => (\n          <Divider\n            key={child.id}\n            notebook={notebook}\n            pageId={pageId}\n            orientation={orientation}\n            previous={children[index]}\n            next={child}\n          />\n        ))}\n      </div>\n    );\n  }\n}\n"],"names":["computePosition","orientation","position","left","top","computeSize","size","width","height","Divider","React","Component","render","next","props","style","backgroundColor","Pane","constructor","computeEdge","bind","computeRelativeSize","handleMouseDown","paneRef","createRef","event","right","bottom","current","getBoundingClientRect","clientX","clientY","distance","closestDirection","sort","a","b","c","d","ctrlKey","metaKey","edge","notebook","pageId","pane","splitPageLayoutPane","id","ref","onMouseDown","Layout","layout","parentOrientation","children","map","child","type","key","slice","index","previous"],"mappings":"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"}