{"version":3,"file":"index.js","sources":["../src/utils.tsx","../src/components/Divider.tsx","../src/components/Pane.tsx","../src/components/Layout.tsx"],"sourcesContent":["import React from \"react\";\nimport { IOrientation } from \"./types\";\n\nexport function computePosition(\n  orientation: IOrientation,\n  position: number\n): React.CSSProperties {\n  return orientation === \"horizontal\"\n    ? {\n        left: `${position * 100}%`,\n        top: \"0\"\n      }\n    : {\n        left: \"0\",\n        top: `${position * 100}%`\n      };\n}\n\nexport function computeSize(\n  orientation: IOrientation,\n  size: number\n): React.CSSProperties {\n  return orientation === \"horizontal\"\n    ? {\n        width: `${size * 100}%`,\n        height: \"100%\"\n      }\n    : {\n        width: \"100%\",\n        height: `${size * 100}%`\n      };\n}\n","import React from \"react\";\nimport { ILayout, IPane, ILayoutController, IOrientation } from \"../types\";\nimport { computePosition } from \"../utils\";\n\nexport interface DividerProps {\n  notebook: ILayoutController;\n  pageId: string;\n  orientation: IOrientation;\n  previous: ILayout | IPane;\n  next: ILayout | IPane;\n}\n\nexport class Divider extends React.Component<DividerProps> {\n  computeSize(orientation: IOrientation): React.CSSProperties {\n    return orientation === \"horizontal\"\n      ? {\n          width: \"10px\",\n          height: \"100%\"\n        }\n      : {\n          width: \"100%\",\n          height: \"10px\"\n        };\n  }\n\n  render() {\n    const { orientation, next } = this.props;\n\n    const style = {\n      backgroundColor: \"red\",\n      position: \"absolute\",\n      ...computePosition(orientation, next.position),\n      ...this.computeSize(orientation)\n    } as React.CSSProperties;\n\n    return <div style={style} />;\n  }\n}\n","import React from \"react\";\n\nimport { IDirection, ILayoutController, IOrientation, IPane, IPaneProps } from \"../types\";\nimport { computePosition, computeSize } from \"../utils\";\n\nexport interface PaneProps {\n  notebook: ILayoutController;\n  pageId: string;\n  pane: IPane;\n  orientation: IOrientation;\n  Component: React.ComponentType<IPaneProps>;\n}\n\nexport class Pane extends React.Component<PaneProps> {\n  paneRef: React.RefObject<HTMLDivElement>;\n\n  constructor(props: PaneProps) {\n    super(props);\n\n    this.computeEdge = this.computeEdge.bind(this);\n    this.computeRelativeSize = this.computeRelativeSize.bind(this);\n    this.handleMouseDown = this.handleMouseDown.bind(this);\n\n    this.paneRef = React.createRef();\n  }\n\n  computeEdge(event: React.MouseEvent): IDirection | null {\n    const { left, right, top, bottom } =\n      this.paneRef.current!.getBoundingClientRect();\n\n    const { clientX, clientY } = event;\n\n    const [distance, closestDirection] = ([\n      [clientX - left, \"west\"],\n      [right - clientX, \"east\"],\n      [clientY - top, \"north\"],\n      [bottom - clientY, \"south\"]\n    ] as [number, IDirection][]).sort(([a, b], [c, d]) => a - c)[0];\n\n    return distance <= 100 ? (closestDirection as IDirection) : null;\n  }\n\n  computeRelativeSize(orientation: IOrientation, event: React.MouseEvent) {\n    const { left, top, width, height } =\n      this.paneRef.current!.getBoundingClientRect();\n\n    return orientation === \"horizontal\"\n      ? event.clientX - left / width\n      : event.clientY - top / height;\n  }\n\n  handleMouseDown(event: React.MouseEvent) {\n    if (!event.ctrlKey || !event.metaKey) return;\n\n    const edge = this.computeEdge(event);\n    if (edge === null) return;\n\n    const { notebook, pageId, pane } = this.props;\n\n    notebook.splitPageLayoutPane(\n      pageId,\n      pane.id,\n      edge,\n      this.computeRelativeSize(\n        edge === \"west\" || edge === \"east\" ? \"horizontal\" : \"vertical\",\n        event\n      )\n    );\n  }\n\n  render() {\n    const { pane, orientation, Component } = this.props;\n    const { position, size, props } = pane;\n\n    const style = {\n      position: \"absolute\",\n      ...computePosition(orientation, position),\n      ...computeSize(orientation, size)\n    } as React.CSSProperties;\n\n    return (\n      <div ref={this.paneRef} style={style} onMouseDown={this.handleMouseDown}>\n        <Component {...props} />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { IOrientation } from \"..\";\nimport { ILayout, ILayoutController, IPaneProps } from \"../types\";\nimport { computePosition, computeSize } from \"../utils\";\nimport { Divider } from \"./Divider\";\nimport { Pane } from \"./Pane\";\n\nexport interface LayoutProps {\n  notebook: ILayoutController;\n  pageId: string;\n  layout: ILayout;\n  orientation: IOrientation;\n  Component: React.ComponentType<IPaneProps>;\n}\n\nexport class Layout extends React.Component<LayoutProps> {\n  render() {\n    const {\n      notebook,\n      pageId,\n      layout,\n      orientation: parentOrientation,\n      Component\n    } = this.props;\n    const { orientation, children } = layout;\n\n    const style = {\n      position: \"relative\",\n      ...computePosition(parentOrientation, layout.position),\n      ...computeSize(parentOrientation, layout.size)\n    } as React.CSSProperties;\n\n    return (\n      <div style={style}>\n        {children.map((child) =>\n          child.type === \"layout\" ? (\n            <Layout\n              key={child.id}\n              notebook={notebook}\n              pageId={pageId}\n              layout={child}\n              orientation={orientation}\n              Component={Component}\n            />\n          ) : (\n            <Pane\n              key={child.id}\n              notebook={notebook}\n              pageId={pageId}\n              pane={child}\n              orientation={orientation}\n              Component={Component}\n            />\n          )\n        )}\n        {children.slice(1).map((child, index) => (\n          <Divider\n            key={child.id}\n            notebook={notebook}\n            pageId={pageId}\n            orientation={orientation}\n            previous={children[index]}\n            next={child}\n          />\n        ))}\n      </div>\n    );\n  }\n}\n"],"names":["computePosition","orientation","position","left","top","computeSize","size","width","height","Divider","render","props","next","style","backgroundColor","React","Component","Pane","computeEdge","bind","computeRelativeSize","handleMouseDown","paneRef","createRef","event","current","getBoundingClientRect","right","bottom","clientX","clientY","sort","a","c","distance","closestDirection","ctrlKey","metaKey","edge","notebook","pageId","pane","splitPageLayoutPane","id","ref","onMouseDown","Layout","layout","parentOrientation","children","map","child","type","key","slice","index","previous"],"mappings":"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"}