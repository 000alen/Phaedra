{"version":3,"file":"index.js","sources":["../src/Notebook.tsx","../src/Utils.tsx"],"sourcesContent":["import generateName from \"project-name-generator\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nexport type IDirection = \"north\" | \"south\" | \"east\" | \"west\";\n\nexport type IOrientation = \"horizontal\" | \"vertical\";\n\nexport interface ISource {\n  id: string;\n  title: string;\n  type: string;\n  content: string;\n  path?: string;\n  index?: number;\n}\n\nexport interface IReference {\n  id: string;\n  title: string;\n  sourceId: string;\n}\n\nexport interface IPaneProps {\n  type: string;\n  paramId?: string | undefined;\n}\n\nexport interface IPane {\n  type: \"pane\";\n  id: string;\n  position: number;\n  size: number;\n  previous: string | null;\n  next: string | null;\n  props: IPaneProps;\n}\n\nexport interface ILayout {\n  type: \"layout\";\n  id: string;\n  position: number;\n  size: number;\n  orientation: IOrientation;\n  previous: string | null;\n  next: string | null;\n  children: (ILayout | IPane)[];\n}\n\nexport interface IContent {\n  ops: object[];\n}\n\nexport interface IQuill {\n  id: string;\n  content: IContent;\n}\n\nexport interface IPage {\n  id: string;\n  references: IReference[];\n  layout: ILayout;\n  content: IContent;\n  quills: IQuill[];\n}\n\nexport interface INotebook {\n  id: string;\n  name: string;\n  sources: ISource[];\n  pages: IPage[];\n}\n\nexport interface ILayoutController {\n  splitPageLayoutPane: (\n    pageId: string,\n    paneId: string,\n    edge: IDirection,\n    relativeSize: number\n  ) => void;\n  resizePageLayoutPane: (\n    pageId: string,\n    paneId: string,\n    edge: IDirection,\n    size: number\n  ) => void;\n  removePageLayoutPane: (pageId: string, paneId: string) => void;\n}\n\nexport class Notebook {\n  id: string;\n  name: string;\n  sources: ISource[];\n  pages: IPage[];\n\n  constructor({ id, name, sources, pages }: Partial<INotebook>) {\n    this.id = id || uuidv4();\n    this.name = name || generateName().spaced;\n    this.sources = sources || [];\n    this.pages = pages || [];\n  }\n\n  JSON() {\n    return {\n      id: this.id,\n      name: this.name,\n      sources: this.sources,\n      pages: this.pages\n    };\n  }\n\n  getId() {\n    return this.id;\n  }\n\n  getName() {\n    return this.name;\n  }\n\n  getSources() {\n    return this.sources;\n  }\n\n  getPages() {\n    return this.pages;\n  }\n\n  getSource(sourceId: string) {\n    return this.sources.find((source) => source.id === sourceId);\n  }\n\n  getPage(pageId: string) {\n    return this.pages.find((page) => page.id === pageId);\n  }\n\n  getPageReferences(pageId: string) {\n    return this.getPage(pageId)?.references;\n  }\n\n  getPageLayout(pageId: string) {\n    return this.getPage(pageId)?.layout;\n  }\n\n  getPageLayoutPanes(pageId: string) {\n    throw new Error(\"Not implemented\");\n  }\n\n  getPageContent(pageId: string) {\n    return this.getPage(pageId)?.content;\n  }\n\n  getPageQuills(pageId: string) {\n    return this.getPage(pageId)?.quills;\n  }\n\n  getPageReference(pageId: string, referenceId: string) {\n    return this.getPageReferences(pageId)?.find(\n      (reference) => reference.id === referenceId\n    );\n  }\n\n  getPageLayoutPane(pageId: string, paneId: string) {\n    throw new Error(\"Not implemented\");\n  }\n\n  getPageQuill(pageId: string, quillId: string) {\n    return this.getPageQuills(pageId)?.find((quill) => quill.id === quillId);\n  }\n\n  addSource(source: ISource) {\n    this.sources.push(source);\n  }\n\n  addPage(page: IPage) {\n    this.pages.push(page);\n  }\n\n  addPageReference(pageId: string, reference: IReference) {\n    this.getPage(pageId)?.references.push(reference);\n  }\n\n  addPageQuill(pageId: string, quill: IQuill) {\n    this.getPageQuills(pageId)?.push(quill);\n  }\n\n  removeSource(sourceId: string) {\n    this.sources = this.sources.filter((source) => source.id !== sourceId);\n  }\n\n  removePage(pageId: string) {\n    this.pages = this.pages.filter((page) => page.id !== pageId);\n  }\n\n  removePageReference(pageId: string, referenceId: string) {\n    const page = this.getPage(pageId);\n    if (page)\n      page.references = page.references.filter(\n        (reference) => reference.id !== referenceId\n      );\n  }\n\n  removePageLayoutPane(pageId: string, paneId: string) {\n    throw new Error(\"Not implemented\");\n  }\n\n  removePageQuill(pageId: string, quillId: string) {\n    const page = this.getPage(pageId);\n    if (page) page.quills = page.quills.filter((quill) => quill.id !== quillId);\n  }\n\n  rename(name: string) {\n    this.name = name;\n  }\n\n  editPageContent(pageId: string, operation: object) {\n    const page = this.getPage(pageId);\n    if (page) page.content.ops.push(operation);\n  }\n\n  editPageQuill(pageId: string, quillId: string, operation: object) {\n    const quill = this.getPageQuill(pageId, quillId);\n    if (quill) quill.content.ops.push(operation);\n  }\n\n  splitPageLayoutPane(\n    pageId: string,\n    paneId: string,\n    edge: IDirection,\n    size: number\n  ) {\n    throw new Error(\"Not implemented\");\n  }\n\n  resizePageLayoutPane(\n    pageId: string,\n    paneId: string,\n    edge: IDirection,\n    size: number\n  ) {\n    throw new Error(\"Not implemented\");\n  }\n}\n","import generateName from \"project-name-generator\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nimport {\n  IContent, ILayout, IPage, IPane, IPaneProps, IQuill, IReference, ISource\n} from \"./Notebook\";\n\nexport function makeSource({\n  id,\n  title,\n  type,\n  content,\n  path,\n  index\n}: Partial<ISource>): ISource {\n  if (id === undefined) id = uuidv4();\n  if (title === undefined) title = generateName().spaced;\n  if (type === undefined) type = \"unknown\";\n  if (content === undefined) content = \"\";\n  if (path === undefined) path = undefined;\n  if (index === undefined) index = undefined;\n\n  return {\n    id,\n    title,\n    type,\n    content,\n    path,\n    index\n  };\n}\n\nexport function makeReference({\n  id,\n  title,\n  sourceId\n}: Partial<IReference>): IReference {\n  if (id === undefined) id = uuidv4();\n  if (title === undefined) title = generateName().spaced;\n  if (sourceId === undefined) sourceId = \"unknown\";\n\n  return {\n    id,\n    title,\n    sourceId\n  };\n}\n\nexport function makePaneProps({\n  type,\n  paramId\n}: Partial<IPaneProps>): IPaneProps {\n  if (type === undefined) type = \"default\";\n  if (paramId === undefined) paramId = undefined;\n\n  return {\n    type,\n    paramId\n  };\n}\n\nexport function makePane({\n  id,\n  position,\n  size,\n  previous,\n  next,\n  props\n}: Partial<IPane>): IPane {\n  if (id === undefined) id = uuidv4();\n  if (position === undefined) position = 0;\n  if (size === undefined) size = 1;\n  if (previous === undefined) previous = null;\n  if (next === undefined) next = null;\n  if (props === undefined) props = makePaneProps({});\n\n  return {\n    type: \"pane\",\n    id,\n    position,\n    size,\n    previous,\n    next,\n    props\n  };\n}\n\nexport function makeLayout({\n  id,\n  position,\n  size,\n  orientation,\n  previous,\n  next,\n  children\n}: Partial<ILayout>): ILayout {\n  if (id === undefined) id = uuidv4();\n  if (position === undefined) position = 0;\n  if (size === undefined) size = 1;\n  if (orientation === undefined) orientation = \"horizontal\";\n  if (previous === undefined) previous = null;\n  if (next === undefined) next = null;\n  if (children === undefined) children = [makePane({})];\n\n  return {\n    type: \"layout\",\n    id,\n    position,\n    size,\n    orientation,\n    previous,\n    next,\n    children\n  };\n}\n\nexport function makeContent({ ops }: Partial<IContent>): IContent {\n  if (ops === undefined) ops = [];\n\n  return {\n    ops\n  };\n}\n\nexport function makeQuill({ id, content }: Partial<IQuill>): IQuill {\n  if (id === undefined) id = uuidv4();\n  if (content === undefined) content = makeContent({});\n\n  return {\n    id,\n    content\n  };\n}\n\nexport function makePage({\n  id,\n  references,\n  layout,\n  content,\n  quills\n}: Partial<IPage>): IPage {\n  if (id === undefined) id = uuidv4();\n  if (references === undefined) references = [];\n  if (layout === undefined) layout = makeLayout({});\n  if (content === undefined) content = makeContent({});\n  if (quills === undefined) quills = [];\n\n  return {\n    id,\n    references,\n    layout,\n    content,\n    quills\n  };\n}\n"],"names":["Notebook","id","name","sources","pages","uuidv4","generateName","spaced","JSON","getId","getName","getSources","getPages","getSource","sourceId","find","source","getPage","pageId","page","getPageReferences","references","getPageLayout","layout","getPageLayoutPanes","Error","getPageContent","content","getPageQuills","quills","getPageReference","referenceId","reference","getPageLayoutPane","paneId","getPageQuill","quillId","quill","addSource","push","addPage","addPageReference","addPageQuill","removeSource","filter","removePage","removePageReference","removePageLayoutPane","removePageQuill","rename","editPageContent","operation","ops","editPageQuill","splitPageLayoutPane","edge","size","resizePageLayoutPane","makeSource","title","type","path","index","undefined","makeReference","makePaneProps","paramId","makePane","position","previous","next","props","makeLayout","orientation","children","makeContent","makeQuill","makePage"],"mappings":";;;;;IAwFaA,QAAb;AAME;QAAcC,UAAAA;QAAIC,YAAAA;QAAMC,eAAAA;QAASC,aAAAA;AAC/B,SAAKH,EAAL,GAAUA,EAAE,IAAII,OAAM,EAAtB;AACA,SAAKH,IAAL,GAAYA,IAAI,IAAII,YAAY,GAAGC,MAAnC;AACA,SAAKJ,OAAL,GAAeA,OAAO,IAAI,EAA1B;AACA,SAAKC,KAAL,GAAaA,KAAK,IAAI,EAAtB;AACD;;AAXH;;AAAA,SAaEI,IAbF,GAaE;AACE,WAAO;AACLP,MAAAA,EAAE,EAAE,KAAKA,EADJ;AAELC,MAAAA,IAAI,EAAE,KAAKA,IAFN;AAGLC,MAAAA,OAAO,EAAE,KAAKA,OAHT;AAILC,MAAAA,KAAK,EAAE,KAAKA;AAJP,KAAP;AAMD,GApBH;;AAAA,SAsBEK,KAtBF,GAsBE;AACE,WAAO,KAAKR,EAAZ;AACD,GAxBH;;AAAA,SA0BES,OA1BF,GA0BE;AACE,WAAO,KAAKR,IAAZ;AACD,GA5BH;;AAAA,SA8BES,UA9BF,GA8BE;AACE,WAAO,KAAKR,OAAZ;AACD,GAhCH;;AAAA,SAkCES,QAlCF,GAkCE;AACE,WAAO,KAAKR,KAAZ;AACD,GApCH;;AAAA,SAsCES,SAtCF,GAsCE,mBAAUC,QAAV;AACE,WAAO,KAAKX,OAAL,CAAaY,IAAb,CAAkB,UAACC,MAAD;AAAA,aAAYA,MAAM,CAACf,EAAP,KAAca,QAA1B;AAAA,KAAlB,CAAP;AACD,GAxCH;;AAAA,SA0CEG,OA1CF,GA0CE,iBAAQC,MAAR;AACE,WAAO,KAAKd,KAAL,CAAWW,IAAX,CAAgB,UAACI,IAAD;AAAA,aAAUA,IAAI,CAAClB,EAAL,KAAYiB,MAAtB;AAAA,KAAhB,CAAP;AACD,GA5CH;;AAAA,SA8CEE,iBA9CF,GA8CE,2BAAkBF,MAAlB;;;AACE,4BAAO,KAAKD,OAAL,CAAaC,MAAb,CAAP,kDAAO,cAAsBG,UAA7B;AACD,GAhDH;;AAAA,SAkDEC,aAlDF,GAkDE,uBAAcJ,MAAd;;;AACE,6BAAO,KAAKD,OAAL,CAAaC,MAAb,CAAP,mDAAO,eAAsBK,MAA7B;AACD,GApDH;;AAAA,SAsDEC,kBAtDF,GAsDE,4BAAmBN,MAAnB;AACE,UAAM,IAAIO,KAAJ,CAAU,iBAAV,CAAN;AACD,GAxDH;;AAAA,SA0DEC,cA1DF,GA0DE,wBAAeR,MAAf;;;AACE,6BAAO,KAAKD,OAAL,CAAaC,MAAb,CAAP,mDAAO,eAAsBS,OAA7B;AACD,GA5DH;;AAAA,SA8DEC,aA9DF,GA8DE,uBAAcV,MAAd;;;AACE,6BAAO,KAAKD,OAAL,CAAaC,MAAb,CAAP,mDAAO,eAAsBW,MAA7B;AACD,GAhEH;;AAAA,SAkEEC,gBAlEF,GAkEE,0BAAiBZ,MAAjB,EAAiCa,WAAjC;;;AACE,oCAAO,KAAKX,iBAAL,CAAuBF,MAAvB,CAAP,0DAAO,sBAAgCH,IAAhC,CACL,UAACiB,SAAD;AAAA,aAAeA,SAAS,CAAC/B,EAAV,KAAiB8B,WAAhC;AAAA,KADK,CAAP;AAGD,GAtEH;;AAAA,SAwEEE,iBAxEF,GAwEE,2BAAkBf,MAAlB,EAAkCgB,MAAlC;AACE,UAAM,IAAIT,KAAJ,CAAU,iBAAV,CAAN;AACD,GA1EH;;AAAA,SA4EEU,YA5EF,GA4EE,sBAAajB,MAAb,EAA6BkB,OAA7B;;;AACE,kCAAO,KAAKR,aAAL,CAAmBV,MAAnB,CAAP,wDAAO,oBAA4BH,IAA5B,CAAiC,UAACsB,KAAD;AAAA,aAAWA,KAAK,CAACpC,EAAN,KAAamC,OAAxB;AAAA,KAAjC,CAAP;AACD,GA9EH;;AAAA,SAgFEE,SAhFF,GAgFE,mBAAUtB,MAAV;AACE,SAAKb,OAAL,CAAaoC,IAAb,CAAkBvB,MAAlB;AACD,GAlFH;;AAAA,SAoFEwB,OApFF,GAoFE,iBAAQrB,IAAR;AACE,SAAKf,KAAL,CAAWmC,IAAX,CAAgBpB,IAAhB;AACD,GAtFH;;AAAA,SAwFEsB,gBAxFF,GAwFE,0BAAiBvB,MAAjB,EAAiCc,SAAjC;;;AACE,2BAAKf,OAAL,CAAaC,MAAb,mEAAsBG,UAAtB,CAAiCkB,IAAjC,CAAsCP,SAAtC;AACD,GA1FH;;AAAA,SA4FEU,YA5FF,GA4FE,sBAAaxB,MAAb,EAA6BmB,KAA7B;;;AACE,iCAAKT,aAAL,CAAmBV,MAAnB,+EAA4BqB,IAA5B,CAAiCF,KAAjC;AACD,GA9FH;;AAAA,SAgGEM,YAhGF,GAgGE,sBAAa7B,QAAb;AACE,SAAKX,OAAL,GAAe,KAAKA,OAAL,CAAayC,MAAb,CAAoB,UAAC5B,MAAD;AAAA,aAAYA,MAAM,CAACf,EAAP,KAAca,QAA1B;AAAA,KAApB,CAAf;AACD,GAlGH;;AAAA,SAoGE+B,UApGF,GAoGE,oBAAW3B,MAAX;AACE,SAAKd,KAAL,GAAa,KAAKA,KAAL,CAAWwC,MAAX,CAAkB,UAACzB,IAAD;AAAA,aAAUA,IAAI,CAAClB,EAAL,KAAYiB,MAAtB;AAAA,KAAlB,CAAb;AACD,GAtGH;;AAAA,SAwGE4B,mBAxGF,GAwGE,6BAAoB5B,MAApB,EAAoCa,WAApC;AACE,QAAMZ,IAAI,GAAG,KAAKF,OAAL,CAAaC,MAAb,CAAb;AACA,QAAIC,IAAJ,EACEA,IAAI,CAACE,UAAL,GAAkBF,IAAI,CAACE,UAAL,CAAgBuB,MAAhB,CAChB,UAACZ,SAAD;AAAA,aAAeA,SAAS,CAAC/B,EAAV,KAAiB8B,WAAhC;AAAA,KADgB,CAAlB;AAGH,GA9GH;;AAAA,SAgHEgB,oBAhHF,GAgHE,8BAAqB7B,MAArB,EAAqCgB,MAArC;AACE,UAAM,IAAIT,KAAJ,CAAU,iBAAV,CAAN;AACD,GAlHH;;AAAA,SAoHEuB,eApHF,GAoHE,yBAAgB9B,MAAhB,EAAgCkB,OAAhC;AACE,QAAMjB,IAAI,GAAG,KAAKF,OAAL,CAAaC,MAAb,CAAb;AACA,QAAIC,IAAJ,EAAUA,IAAI,CAACU,MAAL,GAAcV,IAAI,CAACU,MAAL,CAAYe,MAAZ,CAAmB,UAACP,KAAD;AAAA,aAAWA,KAAK,CAACpC,EAAN,KAAamC,OAAxB;AAAA,KAAnB,CAAd;AACX,GAvHH;;AAAA,SAyHEa,MAzHF,GAyHE,gBAAO/C,IAAP;AACE,SAAKA,IAAL,GAAYA,IAAZ;AACD,GA3HH;;AAAA,SA6HEgD,eA7HF,GA6HE,yBAAgBhC,MAAhB,EAAgCiC,SAAhC;AACE,QAAMhC,IAAI,GAAG,KAAKF,OAAL,CAAaC,MAAb,CAAb;AACA,QAAIC,IAAJ,EAAUA,IAAI,CAACQ,OAAL,CAAayB,GAAb,CAAiBb,IAAjB,CAAsBY,SAAtB;AACX,GAhIH;;AAAA,SAkIEE,aAlIF,GAkIE,uBAAcnC,MAAd,EAA8BkB,OAA9B,EAA+Ce,SAA/C;AACE,QAAMd,KAAK,GAAG,KAAKF,YAAL,CAAkBjB,MAAlB,EAA0BkB,OAA1B,CAAd;AACA,QAAIC,KAAJ,EAAWA,KAAK,CAACV,OAAN,CAAcyB,GAAd,CAAkBb,IAAlB,CAAuBY,SAAvB;AACZ,GArIH;;AAAA,SAuIEG,mBAvIF,GAuIE,6BACEpC,MADF,EAEEgB,MAFF,EAGEqB,IAHF,EAIEC,IAJF;AAME,UAAM,IAAI/B,KAAJ,CAAU,iBAAV,CAAN;AACD,GA9IH;;AAAA,SAgJEgC,oBAhJF,GAgJE,8BACEvC,MADF,EAEEgB,MAFF,EAGEqB,IAHF,EAIEC,IAJF;AAME,UAAM,IAAI/B,KAAJ,CAAU,iBAAV,CAAN;AACD,GAvJH;;AAAA;AAAA;;SCjFgBiC;MACdzD,UAAAA;MACA0D,aAAAA;MACAC,YAAAA;MACAjC,eAAAA;MACAkC,YAAAA;MACAC,aAAAA;AAEA,MAAI7D,EAAE,KAAK8D,SAAX,EAAsB9D,EAAE,GAAGI,OAAM,EAAX;AACtB,MAAIsD,KAAK,KAAKI,SAAd,EAAyBJ,KAAK,GAAGrD,YAAY,GAAGC,MAAvB;AACzB,MAAIqD,IAAI,KAAKG,SAAb,EAAwBH,IAAI,GAAG,SAAP;AACxB,MAAIjC,OAAO,KAAKoC,SAAhB,EAA2BpC,OAAO,GAAG,EAAV;AAC3B,MAAIkC,IAAI,KAAKE,SAAb,EAAwBF,IAAI,GAAGE,SAAP;AACxB,MAAID,KAAK,KAAKC,SAAd,EAAyBD,KAAK,GAAGC,SAAR;AAEzB,SAAO;AACL9D,IAAAA,EAAE,EAAFA,EADK;AAEL0D,IAAAA,KAAK,EAALA,KAFK;AAGLC,IAAAA,IAAI,EAAJA,IAHK;AAILjC,IAAAA,OAAO,EAAPA,OAJK;AAKLkC,IAAAA,IAAI,EAAJA,IALK;AAMLC,IAAAA,KAAK,EAALA;AANK,GAAP;AAQD;AAED,SAAgBE;MACd/D,WAAAA;MACA0D,cAAAA;MACA7C,iBAAAA;AAEA,MAAIb,EAAE,KAAK8D,SAAX,EAAsB9D,EAAE,GAAGI,OAAM,EAAX;AACtB,MAAIsD,KAAK,KAAKI,SAAd,EAAyBJ,KAAK,GAAGrD,YAAY,GAAGC,MAAvB;AACzB,MAAIO,QAAQ,KAAKiD,SAAjB,EAA4BjD,QAAQ,GAAG,SAAX;AAE5B,SAAO;AACLb,IAAAA,EAAE,EAAFA,EADK;AAEL0D,IAAAA,KAAK,EAALA,KAFK;AAGL7C,IAAAA,QAAQ,EAARA;AAHK,GAAP;AAKD;AAED,SAAgBmD;MACdL,aAAAA;MACAM,gBAAAA;AAEA,MAAIN,IAAI,KAAKG,SAAb,EAAwBH,IAAI,GAAG,SAAP;AACxB,MAAIM,OAAO,KAAKH,SAAhB,EAA2BG,OAAO,GAAGH,SAAV;AAE3B,SAAO;AACLH,IAAAA,IAAI,EAAJA,IADK;AAELM,IAAAA,OAAO,EAAPA;AAFK,GAAP;AAID;AAED,SAAgBC;MACdlE,WAAAA;MACAmE,iBAAAA;MACAZ,aAAAA;MACAa,iBAAAA;MACAC,aAAAA;MACAC,cAAAA;AAEA,MAAItE,EAAE,KAAK8D,SAAX,EAAsB9D,EAAE,GAAGI,OAAM,EAAX;AACtB,MAAI+D,QAAQ,KAAKL,SAAjB,EAA4BK,QAAQ,GAAG,CAAX;AAC5B,MAAIZ,IAAI,KAAKO,SAAb,EAAwBP,IAAI,GAAG,CAAP;AACxB,MAAIa,QAAQ,KAAKN,SAAjB,EAA4BM,QAAQ,GAAG,IAAX;AAC5B,MAAIC,IAAI,KAAKP,SAAb,EAAwBO,IAAI,GAAG,IAAP;AACxB,MAAIC,KAAK,KAAKR,SAAd,EAAyBQ,KAAK,GAAGN,aAAa,CAAC,EAAD,CAArB;AAEzB,SAAO;AACLL,IAAAA,IAAI,EAAE,MADD;AAEL3D,IAAAA,EAAE,EAAFA,EAFK;AAGLmE,IAAAA,QAAQ,EAARA,QAHK;AAILZ,IAAAA,IAAI,EAAJA,IAJK;AAKLa,IAAAA,QAAQ,EAARA,QALK;AAMLC,IAAAA,IAAI,EAAJA,IANK;AAOLC,IAAAA,KAAK,EAALA;AAPK,GAAP;AASD;AAED,SAAgBC;MACdvE,WAAAA;MACAmE,iBAAAA;MACAZ,aAAAA;MACAiB,oBAAAA;MACAJ,iBAAAA;MACAC,aAAAA;MACAI,iBAAAA;AAEA,MAAIzE,EAAE,KAAK8D,SAAX,EAAsB9D,EAAE,GAAGI,OAAM,EAAX;AACtB,MAAI+D,QAAQ,KAAKL,SAAjB,EAA4BK,QAAQ,GAAG,CAAX;AAC5B,MAAIZ,IAAI,KAAKO,SAAb,EAAwBP,IAAI,GAAG,CAAP;AACxB,MAAIiB,WAAW,KAAKV,SAApB,EAA+BU,WAAW,GAAG,YAAd;AAC/B,MAAIJ,QAAQ,KAAKN,SAAjB,EAA4BM,QAAQ,GAAG,IAAX;AAC5B,MAAIC,IAAI,KAAKP,SAAb,EAAwBO,IAAI,GAAG,IAAP;AACxB,MAAII,QAAQ,KAAKX,SAAjB,EAA4BW,QAAQ,GAAG,CAACP,QAAQ,CAAC,EAAD,CAAT,CAAX;AAE5B,SAAO;AACLP,IAAAA,IAAI,EAAE,QADD;AAEL3D,IAAAA,EAAE,EAAFA,EAFK;AAGLmE,IAAAA,QAAQ,EAARA,QAHK;AAILZ,IAAAA,IAAI,EAAJA,IAJK;AAKLiB,IAAAA,WAAW,EAAXA,WALK;AAMLJ,IAAAA,QAAQ,EAARA,QANK;AAOLC,IAAAA,IAAI,EAAJA,IAPK;AAQLI,IAAAA,QAAQ,EAARA;AARK,GAAP;AAUD;AAED,SAAgBC;MAAcvB,YAAAA;AAC5B,MAAIA,GAAG,KAAKW,SAAZ,EAAuBX,GAAG,GAAG,EAAN;AAEvB,SAAO;AACLA,IAAAA,GAAG,EAAHA;AADK,GAAP;AAGD;AAED,SAAgBwB;MAAY3E,WAAAA;MAAI0B,gBAAAA;AAC9B,MAAI1B,EAAE,KAAK8D,SAAX,EAAsB9D,EAAE,GAAGI,OAAM,EAAX;AACtB,MAAIsB,OAAO,KAAKoC,SAAhB,EAA2BpC,OAAO,GAAGgD,WAAW,CAAC,EAAD,CAArB;AAE3B,SAAO;AACL1E,IAAAA,EAAE,EAAFA,EADK;AAEL0B,IAAAA,OAAO,EAAPA;AAFK,GAAP;AAID;AAED,SAAgBkD;MACd5E,WAAAA;MACAoB,mBAAAA;MACAE,eAAAA;MACAI,gBAAAA;MACAE,eAAAA;AAEA,MAAI5B,EAAE,KAAK8D,SAAX,EAAsB9D,EAAE,GAAGI,OAAM,EAAX;AACtB,MAAIgB,UAAU,KAAK0C,SAAnB,EAA8B1C,UAAU,GAAG,EAAb;AAC9B,MAAIE,MAAM,KAAKwC,SAAf,EAA0BxC,MAAM,GAAGiD,UAAU,CAAC,EAAD,CAAnB;AAC1B,MAAI7C,OAAO,KAAKoC,SAAhB,EAA2BpC,OAAO,GAAGgD,WAAW,CAAC,EAAD,CAArB;AAC3B,MAAI9C,MAAM,KAAKkC,SAAf,EAA0BlC,MAAM,GAAG,EAAT;AAE1B,SAAO;AACL5B,IAAAA,EAAE,EAAFA,EADK;AAELoB,IAAAA,UAAU,EAAVA,UAFK;AAGLE,IAAAA,MAAM,EAANA,MAHK;AAILI,IAAAA,OAAO,EAAPA,OAJK;AAKLE,IAAAA,MAAM,EAANA;AALK,GAAP;AAOD;;;;;;;;;;;;"}